diff --git a/ext/standard/dns.c b/ext/standard/dns.c
index 7f4b93a..a9e45b4 100644
--- a/ext/standard/dns.c
+++ b/ext/standard/dns.c
@@ -32,6 +32,20 @@
 # include "php_network.h"
 #endif

+#ifdef __ANDROID__
+typedef void* dns_handle_t;
+static inline dns_handle_t dns_open(const char *nameserver) { return NULL; }
+static inline void dns_free(dns_handle_t handle) {}
+static inline int dns_search(dns_handle_t handle, const char *dname, int class, int type,
+    unsigned char *answer, int anslen, struct sockaddr *from, socklen_t *fromsize) {
+    return -1;
+}
+
+/* Disable the rest of the DNS implementation on Android */
+#define ANDROID_DNS_STUB
+#endif
+
+#ifndef ANDROID_DNS_STUB
 static dns_handle_t php_dns_open(const char *nameserver);
 static void php_dns_free_handle(dns_handle_t handle);
 static int php_dns_search(dns_handle_t handle, const char *dname, int class, int type,
@@ -1130,3 +1144,5 @@ PHP_FUNCTION(dns_get_record)
 	}
 }
 #endif
+
+#endif /* !ANDROID_DNS_STUB */
