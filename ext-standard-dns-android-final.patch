--- a/ext/standard/dns.c
+++ b/ext/standard/dns.c
@@ -1,0 +1,13 @@
+#ifdef __ANDROID__
+typedef void* dns_handle_t;
+static inline dns_handle_t dns_open(const char *nameserver) { return NULL; }
+static inline void dns_free(dns_handle_t handle) {}
+static inline int dns_search(dns_handle_t handle, const char *dname, int class, int type,
+    unsigned char *answer, int anslen, struct sockaddr *from, socklen_t *fromsize) {
+    return -1;
+}
+
+/* Disable the rest of the DNS implementation on Android */
+#define ANDROID_DNS_STUB
+#endif
+
+#ifndef ANDROID_DNS_STUB
