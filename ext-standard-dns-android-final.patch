--- a/ext/standard/dns.c
+++ b/ext/standard/dns.c
@@ -1,10 +1,16 @@
+#ifdef __ANDROID__
+typedef void* dns_handle_t;
+static inline dns_handle_t dns_open(const char *nameserver) { return NULL; }
+static inline void dns_free(dns_handle_t handle) {}
+static inline int dns_search(dns_handle_t handle, const char *dname, int class, int type,
+    unsigned char *answer, int anslen, struct sockaddr *from, socklen_t *fromsize) {
+    return -1;
+}
+
+/* Disable the rest of the DNS implementation on Android */
+#define ANDROID_DNS_STUB
+#endif
+
+#ifndef ANDROID_DNS_STUB
 /*
-   + DO NOT REMOVE OR MODIFY THIS HEADER +
-   +----------------------------------------------------------------------+
-   | PHP Version 8                                                        |
-   +----------------------------------------------------------------------+
-   | Copyright (c) The PHP Group                                          |
-   +----------------------------------------------------------------------+
-   | This source file is subject to version 3.01 of the PHP license,      |
-   | that is bundled with this package in the file LICENSE, and is        |
-   | available through the world-wide-web at the following url:           |
-   | https://www.php.net/license/3_01.txt                                 |
-   | If you did not receive a copy of the PHP license and are unable to   |
-   | obtain it through the world-wide-web, please send a note to          |
-   | license@php.net so we can mail you a copy immediately.               |
-   +----------------------------------------------------------------------+
-   | Authors: The PHP Group                                               |
-   +----------------------------------------------------------------------+
-   */
+   DO NOT REMOVE OR MODIFY THIS HEADER +
+  +----------------------------------------------------------------------+
+  | PHP Version 8                                                        |
+  +----------------------------------------------------------------------+
+  | Copyright (c) The PHP Group                                          |
+  +----------------------------------------------------------------------+
+  | This source file is subject to version 3.01 of the PHP license,      |
+  | that is bundled with this package in the file LICENSE, and is        |
+  | available through the world-wide-web at the following url:           |
+  | https://www.php.net/license/3_01.txt                                 |
+  | If you did not receive a copy of the PHP license and are unable to   |
+  | obtain it through the world-wide-web, please send a note to          |
+  | license@php.net so we can mail you a copy immediately.               |
+  +----------------------------------------------------------------------+
+  | Authors: The PHP Group                                               |
+  +----------------------------------------------------------------------+
+ */
 
 #include "php.h"
 #include "php_dns.h"
 /* ... continue with the rest of the original file content ... */
